<html>
    <head>
        <title>[% tbbfile %] test report</title>
        <style type="text/css">
            .test_ok {
                color: #006600;
            }
            .test_notok {
                color: #FF0000;
            }
            .text_red A {
                color: #FF0000;
            }
        </style>
        <script language="JavaScript" type="text/javascript">
                function togglecontent(id) {
                    if (document.getElementById(id).style.display == "none") {
                        document.getElementById(id).style.display = '';
                    } else {
                        document.getElementById(id).style.display = "none";
                    }
                }
        </script>
    </head>
    <body>
        [% IF tbbfiles.$tbbfile.type == 'browserunit' %]
        <h1>Browser infos</h1>
        [% ELSE %]
        <h1>Bundle infos</h1>
        [% END %]
        <ul>
            [% IF tbbfiles.$tbbfile.type == 'browserunit' %]
            <li><b>Commit:</b> <a href="https://gitweb.torproject.org/tor-browser.git/commit/[% tbbfiles.$tbbfile.commit %]">[% tbbfiles.$tbbfile.commit %]</a></li>
            <li><b>Commit subject:</b> [% tbbfiles.$tbbfile.commit_subject %]</li>
            [% ELSE %]
            <li><b>Filename:</b> [% tbbfiles.$tbbfile.filename %]</li>
            <li><b>Version:</b> [% tbbfiles.$tbbfile.version %]</li>
            <li><b>Language:</b> [% tbbfiles.$tbbfile.language %]</li>
            <li><b>OS:</b> [% tbbfiles.$tbbfile.os %]</li>
            <li><b>Architecture:</b> [% tbbfiles.$tbbfile.arch %]</li>
            <li><b>sha256sum:</b> [% tbbfiles.$tbbfile.sha256sum %]</li>
            [% END %]
            <li><b>Total run time:</b> [% tbbfiles.$tbbfile.run_time %] seconds</li>
        </ul>

        <h1>Results</h1>
        [% FOREACH test IN tbbfiles.$tbbfile.tests %]
        [% IF ! test.results; NEXT; END %]
        <a href="javascript:togglecontent('test_[% test.name %]');">
            [% IF is_test_error(test) %]
              <img src="../../static/failed-small.png" />
            [% ELSIF is_test_warning(test) %]
              <img src="../../static/warning-small.png" />
            [% ELSE %]
              <img src="../../static/ok-small.png" />
            [% END %]
            [% test.name %]</a><br />

        <div id="test_[% test.name %]" style="display:none">
            <h2><a name="[% test.name %]">[% test.name %]</a></h2>
            <ul>
                <li><b>Description:</b> [% test.descr %]</li>
                <li><b>Test type:</b> [% test.type %]</li>
                <li><b>Status:</b>
                [% IF test.results.success %]
                  <span class="test_ok">OK</span>
                [% ELSE %]
                  <span class="test_notok">NOT OK</span> ([% test.fail_type %])
                [% END %]
                </li>
                <li><b>Run time:</b> [% test.run_time %] seconds</li>
            </ul>
            <h3>Details</h3>
            <p>
            [% SET type = test.type; INCLUDE "details_${type}.html" %]
            </p>
            <br /><br />
        </div>
        [% END %]

        <hr>
        <h1>Screenshots</h1>
        [% FOREACH test IN tbbfiles.$tbbfile.tests %]
          [% IF test.screenshots && test.screenshots.size %]
            <h3>[% test.name %]</h3>
            [% FOREACH screenshot IN test.screenshots %]
            <a href="results-[% tbbfile %]/[% screenshot %]"><img src="results-[% tbbfile %]/t-[% screenshot %]" /></a><br /><br />
            [% END %]
          [% END %]
        [% END %]
    </body>
</html>
