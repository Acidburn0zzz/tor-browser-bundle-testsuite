<html>
    <head>
        <title>[% tbbfile %] test report</title>
        <style type="text/css">
            .test_ok {
                color: #006600;
            }
            .test_notok {
                color: #FF0000;
            }
        </style>
    </head>
    <body>
        <h1>Bundle infos</h1>
        <ul>
            <li><b>Filename:</b> [% results.$tbbfile.filename %]</li>
            <li><b>Version:</b> [% results.$tbbfile.version %]</li>
            <li><b>Language:</b> [% results.$tbbfile.language %]</li>
            <li><b>OS:</b> [% results.$tbbfile.os %]</li>
            <li><b>Architecture:</b> [% results.$tbbfile.arch %]</li>
            <li><b>sha256sum:</b> [% results.$tbbfile.sha256sum %]</li>
        </ul>
        <h1>Results</h1>
        [% FOREACH test IN results.$tbbfile.tests.values %]
        <h3>[% test.name %]</h3>
        [% IF ! test.results %]
                NOT RUN
                [% NEXT %]
        [% END %]
        <ul>
            <li><b>Test type:</b> [% test.type %]</li>
            [% IF test.type == 'mozmill' %]
                    <li><b>Status:</b>
                      [% IF test.results.results.0.failed == 0 %]
                      <span class="test_ok">OK</span>
                      [% ELSE %]
                      <span class="test_notok">NOT OK</span>
                      [% END %]
                    </li>
                    <li><b>Passed tests:</b>
                    [% GET test.results.results.0.passed %]/[% GET test.results.results.0.passed + test.results.results.0.failed %]
                    </li>
                    <li><a href="results-[% tbbfile %]/[% test.name %].json">json results</a></li>
            [% ELSIF test.type == 'selenium' %]
                    <li><b>Status:</b>
                      [% IF test.results.success %]
                      <span class="test_ok">OK</span>
                      [% ELSE %]
                      <span class="test_notok">NOT OK</span>
                      [% END %]
                    </li>
                    [% SET stests = test.results.total_tests - test.results.failed.size %]
                    <li><b>Passed tests:</b> [% stests %]/[% test.results.total_tests %]</li>
                    <li><a href="results-[% tbbfile %]/[% test.name %].json">json results</a></li>
            [% END %]
        </ul>
        [% IF test.type == 'selenium' && test.results.failed %]
                [% FOREACH f IN test.results.failed %]
                        <b>Failed test:</b> [% f.id %]<br />
                        <pre>[% f.error %]</pre><br />
                [% END %]
        [% END %]
        [% END %]

        <hr>
        <h1>Screenshots</h1>
        [% FOREACH test IN results.$tbbfile.tests.values %]
          [% IF test.screenshots %]
            <h3>[% test.name %]</h3>
            [% FOREACH screenshot IN test.screenshots %]
            <a href="results-[% tbbfile %]/[% screenshot %]"><img src="results-[% tbbfile %]/t-[% screenshot %]" /></a><br />
            [% END %]
          [% END %]
        [% END %]
    </body>
</html>
